<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






  <link rel="stylesheet" type="text/css" href="/blog/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>


<link rel="stylesheet" type="text/css" href="/blog/css/main.css?v=0.4.3"/>


    <meta name="description" content="面汤的个人博客" />



  <meta name="keywords" content="Hexo,next" />



  <link rel="alternate" href="/blog/atom.xml" title="Blog of MianTang" type="application/atom+xml" />



  <link rel="shorticon icon" type="image/x-icon" href="/blog/favicon.ico?v=0.4.3" />



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    analytics: {
      google: ''
    },
    sidebar: 'post'
  };
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?13ca7c5022056b85eed549f1814f41ab";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <title> Blog of MianTang </title>
</head>

<body>
  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->

  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/blog/" class="brand">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">Blog of MianTang</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<div class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/">
            <i class="menu-item-icon icon-home"></i> <br />
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/blog/categories">
            <i class="menu-item-icon icon-categories"></i> <br />
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/blog/about">
            <i class="menu-item-icon icon-about"></i> <br />
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/blog/archives">
            <i class="menu-item-icon icon-archives"></i> <br />
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/blog/tags">
            <i class="menu-item-icon icon-tags"></i> <br />
            标签
          </a>
        </li>
      
    </ul>
  

  
</div>


      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          
  <div id="posts" class="posts-expand">
    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/blog/2015/07/11/what-about-comment-art/">
                未命名
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-07-11
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/blog/2015/07/11/what-about-comment-art/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/07/11/what-about-comment-art/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <p><a href="http://www.zhihu.com/question/30274886/answer/54683454" target="_blank" rel="external">原是在知乎的答帖</a></p>
<p>个人身份：哔哩哔哩职人弹幕君，弹幕艺术布道者。2012年B站拜年祭弹幕作品作者，第二届蓝白弹幕合战参与者，第三届蓝白弹幕祭主催。</p>
<pre><code>自从b站引入了高级弹幕,提供类似ECMAScript的脚本语言以及对播放器和弹幕进行控制的能力,弹幕本身理论上跟AE之类的工具能达到同样的效果<span class="comment">(不考虑性能消耗)</span>,那么选择弹幕艺术而不是制作视频的原因是什么?
</code></pre><p>总的来说，于个人而言，原因一定包含以下三点：</p>
<h3 id="1-_在弹幕网站寻找认同感。">1. 在弹幕网站寻找认同感。</h3><p>问题描述中也提到，</p>
<pre><code>弹幕艺术是以弹幕内容/变化为主要形式，以弹幕视频为载体，依托各大弹幕视频网站的一种新兴的艺术形式。
</code></pre><p>弹幕是完全依附于弹幕网站的。这些弹幕视频网站有一个特点，那就是都有着其他视频站比不了的用户忠诚度和网站凝聚力。因此在某种程度上，发布一份弹幕作品，在相关的兴趣圈子里可以很好地寻找到认同感，也能在相互交流的过程中得到正反馈。</p>
<p>这是让大部分制作者持续做下去的一个很重要的原因。</p>
<h3 id="2-_传达依托的音乐的感情主题。">2. 传达依托的音乐的感情主题。</h3><p>以现有的弹幕艺术类作品来看，基本上大部分的制作者的选曲都是他们的热爱的主题/喜欢的歌曲（比如东方Project、 Vocaloid和一些ACG类曲目）。</p>
<p>对歌曲主题本身的兴趣和喜爱，这是驱动他们花费许多时间制作弹幕作品的动力所在。</p>
<h3 id="3-_在弹幕作品制作过程中寻找乐趣，自我满足。">3. 在弹幕作品制作过程中寻找乐趣，自我满足。</h3><p>这应该是每个纯粹的职人弹幕君制作弹幕最主要的原因吧。</p>
<p>大部分制作者的乐趣，一般都起源于新鲜感和好奇心，之后因人而异。我仅谈谈我能从哪些弹幕中找到乐趣。</p>
<p><strong>一种弹幕（Acfun/Nico/Bili的定位弹幕），主要依靠不同字符的变化与组合。</strong></p>
<p>比如：</p>
<p>依靠黑色字符“■”和固定弹幕的组合，依靠“弹幕越长弹幕滚动速度越快”这个概念实现的不一样的视觉感官。如裸眼3D，甚至滚动变换（当初文科生的噩梦）</p>
<p><img src="/blog/images/what-about-comment-art/1.jpg" alt="1"></p>
<p>示例：<a href="http://www.bilibili.com/video/av41088/" target="_blank">【阿姨说】_其他</a></p>
<p><a href="http://www.bilibili.com/video/av58515/" target="_blank">[120%] HERO - 亿千万的感谢 [黑屏+弹幕游乐场]_其他</a></p>
<p>（4、5年前的作品，观看最好屏蔽普通弹幕）</p>
<p>仅仅是简单的弹幕，却与视频（音乐）的完美契合，带来的美的享受。</p>
<p><img src="/blog/images/what-about-comment-art/2.jpg" alt="2"></p>
<p>示例：[第一回蓝白弹幕合战]白夢の繭<a href="http://danmaku.us/Bilibili2/1046" target="_blank" rel="external">http://danmaku.us/Bilibili2/1046</a></p>
<p><img src="/blog/images/what-about-comment-art/3.png" alt="3"></p>
<p><a href="http://www.bilibili.com/video/av122646/" target="_blank">[第二回蓝白弹幕合战][蓝组]</a></p>
<p>依靠生存时间和消失时间的差值逐帧实现的超越播放器本身的固有的字符特效。</p>
<p>用一些特殊字符(七巧板)，组合成的字符弹幕画</p>
<p><img src="/blog/images/what-about-comment-art/4.png" alt="4"><br><img src="/blog/images/what-about-comment-art/5.jpg" alt="5"><br><img src="/blog/images/what-about-comment-art/6.jpg" alt="6"><br><img src="/blog/images/what-about-comment-art/7.jpg" alt="7"></p>
<p><strong>这些弹幕都在不同方面上体现了制作者的智慧与创意，而这种用有限的元素做出让人赏心悦目、触动心灵的弹幕，就是制作者的乐趣。</strong></p>
<p>——-戴着脚镣跳舞，拼七巧板的奇妙体验</p>
<p><strong>另一种弹幕（Bili/Nico的脚本弹幕），主要依靠弹幕播放器提供的固有API的脚本代码来实现。</strong></p>
<p>它去除了许多禁锢，并且实现方式上也大大增高了门槛（需要ECMAScript基础+更多的艺术细胞）。这种弹幕某种程度上剥夺了前面一种弹幕的乐趣。</p>
<p>然而依然能感受到新的乐趣：</p>
<p>依托固有的API探索新的弹幕表现，如3D：<br><img src="/blog/images/what-about-comment-art/8.jpg" alt="8"><br><img src="/blog/images/what-about-comment-art/9.jpg" alt="9"></p>
<p>示例：<a href="http://www.bilibili.com/video/av410205/" target="_blank" rel="external">【弹幕大赛】Round and Round【高级弹幕】</a></p>
<p>凭借字符画或者矢量画，制作音乐PV，弹幕MAD：</p>
<p><img src="/blog/images/what-about-comment-art/10.jpg" alt="10"></p>
<p><a href="http://www.bilibili.com/video/av451734/" target="_blank" rel="external">【纯弹幕MAD】命运石之门再现【NICO屏录版】【时长20分钟】</a></p>
<p><img src="/blog/images/what-about-comment-art/11.jpg" alt="11"></p>
<p><a href="http://www.bilibili.com/video/av411036/" target="_blank" rel="external">【黑屏弹幕】一首研究镜音的胸部里是什么的歌</a></p>
<p><img src="/blog/images/what-about-comment-art/12.jpg" alt="12"></p>
<p><a href="http://www.bilibili.com/video/av734560/" target="_blank" rel="external">【纯弹幕PV】第三回蓝白弹幕合作祭</a></p>
<p>甚至于另一个范畴，通过弹幕交互制作的弹幕游戏。</p>
<p><a href="http://www.bilibili.com/video/av612580/" target="_blank" rel="external">【弹幕AVG(伪)】玄天·律师事务所</a></p>
<p><a href="http://www.bilibili.com/video/av412614/" target="_blank" rel="external">【弹幕游戏】Hexagon弹幕移植版</a></p>
<p><strong>正如wonderfl、CodePen上的许多Flash动画、HTML5 Canvas动画那样，通过编写抽象的代码来具现自己的设计，从这种融合技术与艺术的过程，也能寻找到独特的乐趣。</strong></p>
<p>即使在这相对严苛的制作环境下，依然能做出震撼人心、让人大呼叫好的弹幕作品。<br>———探索弹幕的无限可能性</p>
<p><strong>弹幕的能力在扩展，弹幕艺术也就不会仅局限于我所提到的。弹幕艺术的概念也将会被更多的人所拓展。</strong></p>
<p>================================</p>
<h3 id="另一个问题，">另一个问题，</h3><pre><code>观众对于弹幕艺术之于静止画MAD/Kinetic typography视频作品态度的区别。
</code></pre><p>观众的态度恐怕难以概述。但必需说明的一点就是，“弹幕理论上跟After Effects之类的工具能达到同样的效果”。有一个重大的区别就是，脚本弹幕没有可视化工具（虽然我们一些有程序基础的弹幕君进行过开发这样的工具，但依然很难满足目前设计与编码的完全解耦需求，并且这种探索也因为一些非技术原因而变缓），</p>
<p>所以，大部分弹幕君的工作流都是记事本手写弹幕，制作难度并不低。而MAD之类的可是有强大的AE在啊。</p>
<p>理论上，我能从哈尔滨走路到南京，也能从哈尔滨坐飞机到南京。但是这能一样吗？</p>
<p>我想，既然都是以表现元素来传达作品主题，弹幕作品从要表达思想内容这一点来看，跟使用其他的载体是相通的吧。</p>
<p>只不过区别在于，弹幕作品使用的是一种“非主流”的技术载体而已。</p>
<p><strong>工具并不重要，重要的是作品要传达的内容。</strong></p>
<p><strong>不用太过关注观众怎么想，我们只需要勿忘初心，热爱自己的东西就可以了。</strong></p>
<p><strong>正如大家说的那样：这是技术宅的浪漫情怀w</strong></p>
<p>我想曾经的闪客、喜欢设计的前端工程师应该也能有类似的感觉吧=w=</p>
<p>================================</p>
<p>最后，以弹幕双子来结尾吧w：</p>
<p>姐姐有蓝色的长发，擅长使用Mode7(定位弹幕)，抖S，阳光并且乐于助人。即使是用简单的工具（七巧板），也能创造出十分美丽的弹幕！</p>
<p>弟弟有白色的短发，擅长使用Mode8(脚本弹幕)，抖M，一脸受样。会用奇怪的代码，能创造出很多令人震惊意想不到的弹幕！</p>
<p><img src="/blog/images/what-about-comment-art/13.jpg" alt="13"></p>
<p>更多作品：</p>
<p><a href="http://www.bilibili.com/sp/%E5%BC%B9%E5%B9%95%E8%89%BA%E6%9C%AF" target="_blank" rel="external">弹幕艺术<em>专题_bilibili</em>哔哩哔哩弹幕视频网</a></p>
<p><a href="http://www.bilibili.com/sp/NICO%E5%BC%B9%E5%B9%95%E8%89%BA%E6%9C%AF" target="_blank" rel="external">NICO弹幕艺术<em>专题_bilibili</em>哔哩哔哩弹幕视频网</a></p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/blog/2015/06/26/roll-change/">
                未命名
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-06-26
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/blog/2015/06/26/roll-change/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/06/26/roll-change/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          <h2 id="一、基础原理">一、基础原理</h2><p>滚动MIKU的实现是以<strong>不同长度的弹幕</strong>所造成的<strong>速度差</strong>实现的。<br><img src="/blog/images/roll-change/1.jpg" alt="1"></p>
<p>如图所示，其中所谓不同长度是指，相邻的长度差为5个字符。<br>而这就造成了以下的结果：</p>
<div class="red"><br>移动每间隔4s/5即0.8秒，相邻长度差的弹幕有相对1个字符长度的位移。<br>正因为有了这1个字符长度的位移，我们就可以使用这个位移来进行遮盖，以达到变换的效果。而进行展示的时间点，则是0.8秒/1.6秒/2.4秒/3.2秒这四个时间点。<br></div>

<p>这个结论可以有很大的扩展空间。在滚动MIKU的例子中，所有的弹幕分为4种最大横向长度，并且相邻的长度差为5个字符：它们分别为2个字符/7个字符/12个字符/17个字符。而作为显示面板的弹幕，横向长度为12个字符。</p>
<p>那么如果我做这样的设计：所有的弹幕分为5种最大横向长度，并且相邻的长度差为4个字符：他们分别为2个字符/6个字符/10个字符/14个字符/18个字符。而作为显示面板的弹幕，横向长度为14个字符。又会出现何种状态呢？答案如下：</p>
<p>相邻长度差为4个字符，移动每间隔4s/4即1秒，相邻长度差的弹幕有相对1个字符长度的位移。而进行展示的时间点，则是1.0秒/2.0秒/3.0秒这三个时间点。</p>
<p>也就是说，可展示的变换状态的个数，就是长度差的字符数减一。比如我要展示BILI，长度差就需要为5，展示MIO，长度差就需要为4，展示2DLAND，长度差就需要为7了。</p>
<p><img src="/blog/images/roll-change/2.jpg" alt="2"></p>
<p>接下来说具体的数据。</p>
<p>刚才说的1个字符长度的位移，这是相对的。比如说以上图为例，以2-1『注，2-1表示最大弹幕长度为2的弹幕中的第1个位置的字符，下面都遵循这个表达。有时候为了防止歧义我会在外面加上[]来表示。』为基准位置，在0.0s的时候，所有弹幕在Bilibili的播放器中是右对齐的，并且有一个初始距离。但这里我们要注重的只是相对位置：也就是说，在0.0s的时候，所有弹幕的相对位置是0个字符。而在0.8s的时候，由于我们将2-1作为了基准位置，则结果就是，2-1的位置所对应的应该是7-2、12-3、17-4这三个位置（在图中由红框表示）。</p>
<p>那么这个结果是如何计算出来的呢？因为运动是相对的，所以我们要设定一个基准长度。而这个基准长度一般来说是刚才所说的展示面板的长度。在滚动MIKU的例子中为12个字符。但是现在我们暂且以图中的2个字符为基准长度来进行计算——</p>
<p><strong>目标位置 = 基准位置 + ((目标长度-基准长度) / 长度差)*（当前时间点/时间间隔）</strong></p>
<p>也就是说，如果我把目标长度定为12，在图中的意思就是：<br>x = 1 + ((12 - 2) / 5) <em> (0.8 / 0.8) = 1 + 2 </em> 1 = 3</p>
<p>意思就是2-1在0.8s处所对应的目标位置为12-3</p>
<p>可能有点晕，那就再做一次。这次我们把基准长度设定成滚动MIKU所使用的长度：12个字符。</p>
<p><img src="/blog/images/roll-change/3.jpg" alt="3"></p>
<p>公式还是这个：<br><strong>目标位置 = 基准位置 + ((目标长度 - 基准长度)  / 长度差)*（当前时间点 / 时间间隔）</strong></p>
<p>这回我们从12-2变换为17-x好了。<br>即<code>x = 2 + ((17 - 12) / 5) * (0.8 / 0.8) = 2 + 1 * 1 = 3</code></p>
<p>意思就是12-2在0.8s的时候对应的位置为17-3，如图中红框所示。</p>
<p>那么再来一次，这回从12-2变换为2-x看看。<br>即<code>x = 2 + ((2 - 12) / 5) * (0.8 / 0.8) = 2 + -2 * 1 = 0</code></p>
<p>显然x不可能小于等于0，所以这个变换是失败的，因为目标字符不存在。在图中可以看到，以方格中的红叉表示。</p>
<p>那让我们再次进行扩展：假如当前时间点为2.4秒，基准位置为12-4，需要变换到7-x。<br>即<code>x = 4 + ((7 - 12) / 5) * (2.4 / 0.8) = 4 + -1 * 3 = 1</code></p>
<p>也就是从12-4在2.4s所对应的位置为7-1。</p>
<p>可能光从这样的计算暂时还没法了解这个式子到底有什么深一层的含义，那就暂且先开始下一个部分好了。</p>
<h2 id="二、变换目标">二、变换目标</h2><p>在以前的分析报告里我好像写过盖板的样子，这里我就不再对盖板进行图示了。</p>
<p>『注意，红色的框表示滚动变换的效果显示区域。也是盖板所留空的区域。』</p>
<p>但是这个图对我们来说是没有什么太大用处的……真正有用的图是下一张——</p>
<p><img src="/blog/images/roll-change/5.jpg" alt="5"></p>
<p>为什么要分行来处理，因为行之间是互相独立的。你可以先把第一行的变换处理了，再继续把之后其他行的变换处理了。而你所得到的每行的几条弹幕，可以按照排列顺序把相同类型与长度的组合起来，因为它们互不影响，但是切记，保持每行所得到的弹幕结果的排列顺序。</p>
<p>无论如何，让我们先从第一行开始处理吧。</p>
<p><img src="/blog/images/roll-change/6.jpg" alt="6"></p>
<p>对于滚动MIKU的第一行来说，我们想要得到的是如图所示的变换效果。如何才能做到让各种长度的弹幕交错组合来达成这样的变化效果，接下来的是重头戏。</p>
<h2 id="三、变换原理">三、变换原理</h2><p>首先贴一张图。</p>
<p><img src="/blog/images/roll-change/7.jpg" alt="7"></p>
<p>这张图的意思是，对于12个字符这一基准长度，其余长度所对应的字符位置的变化方式。</p>
<p>还记不记得第一节最后的公式？</p>
<p>目标位置 = 基准位置 + ((目标长度 - 基准长度)  / 长度差)*（当前时间点 / 时间间隔）</p>
<p>你会发现，<strong>这些格子和其中的数字，就是以上这条公式的最直观表现（基准长度=12）</strong>。</p>
<p>接下来的图，是表明了某个长度中的某个位置的字符，是以怎样的轨迹移动的。</p>
<p><img src="/blog/images/roll-change/8.jpg" alt="8"></p>
<p>这张图的意思是，如果你在灰色格子中放入一个字符，这个字符在0.0s-4.0s这六个时间点上，将会以橙色格子的轨迹移动。</p>
<p>然后让我们把第二节和第三节的图对应起来。</p>
<p><img src="/blog/images/roll-change/9.png" alt="9"></p>
<p>是不是有种恍然大悟的感觉w<br>还是说“老早知道了混蛋！快点给我接着讲！”w</p>
<p>最后要说的，是变换的核心部分。</p>
<h2 id="四、变换解析">四、变换解析</h2><p><strong>滚动变换，说到底，是遮盖与显示互相交错的过程</strong>。</p>
<p><img src="/blog/images/roll-change/10.jpg" alt="10"></p>
<p>这张图是第二章中我说的，MIKU的第一行所要达到的目标。<br>可以看到，图中的空白部分，既可以没有弹幕，也可以用白色的弹幕遮盖。</p>
<p>而图中的蓝色部分，要以蓝色的弹幕来显示。</p>
<p>那么为了方便显示，</p>
<p>我以蓝灰色表示遮盖用的弹幕 ，</p>
<p>而以蓝色表示显示用的弹幕 。</p>
<p>而以蓝色、蓝灰色、白色所组成的方格 ，则表示需要被遮盖的位置。</p>
<p>这个位置的意义是，<strong>我需要一个显示字符来使变换过程完整，又要在0.8s的时候遮盖掉这个显示字符。</strong></p>
<p><img src="/blog/images/roll-change/11.jpg" alt="11"></p>
<p>这张图的意思是，先以蓝灰色完成目标长度为17的遮盖轨迹，如下图：</p>
<p><img src="/blog/images/roll-change/12.jpg" alt="12"> <img src="/blog/images/roll-change/13.jpg" alt="13"></p>
<p>再以蓝色完成目标长度为12的显示轨迹，如下图：</p>
<p><img src="/blog/images/roll-change/14.jpg" alt="14"> <img src="/blog/images/roll-change/15.jpg" alt="15"></p>
<p>为什么我能断言遮盖用的是长度为17的弹幕，而显示用的是长度为12的弹幕？因为字符移动的轨迹决定了我应该以哪一种弹幕来实现。这点可以参考一下第三节中的第二张图。</p>
<p>综上所述，要达成MIKU第一行的变换结果，请按照上面那两张图的灰色位置，以红色框为标准位置，再以使用的弹幕长度去查找第三节中的那张表。对应的图我截过来了，在上面的右侧。<br>你就会发现，遮盖使用的是17-6，而显示使用的是12-5。</p>
<p>于是第一次处理完成，现在的生成列表里有两条弹幕——<br>这是第一次生成，我给予它一个Lv0的编号。<br>！！注意：Lv0的弹幕处于所有“为了实现第一行所生成的”弹幕的最上层！！</p>
<p>遮盖生成的是17-6<br>意思是用透明方格生成一条最大长度为17个字符的弹幕<br>其中横向第6个位置有一个遮盖用的白色方格</p>
<p>显示生成的是12-5<br>意思是用透明方格生成一条最大长度为12个字符的弹幕<br>其中横向第5个位置有一个显示用的蓝色方格</p>
<p>那么第一次生成完毕后的结果如下图：</p>
<p><img src="/blog/images/roll-change/16.jpg" alt="16"></p>
<p>可以看到刚才生成的部分都被挖去了。这是因为接下来的弹幕都在刚才那两条的下面，所以即使再有显示用的弹幕经过刚才的位置也无所谓，都已经被前一条弹幕的轨迹给挡掉了。</p>
<p>以刚才的方法继续处理——</p>
<p><img src="/blog/images/roll-change/17.jpg" alt="17"></p>
<p>这回的结果如下——</p>
<p><strong>Lv1</strong></p>
<pre><code>遮盖生成的是7-6
显示生成的是12-8
</code></pre><p>那么生成列表里有四条弹幕了——</p>
<p><strong>Lv0</strong></p>
<pre><code>遮盖的17-6
显示的12-5
</code></pre><p><strong>Lv1</strong></p>
<pre><code>遮盖的7-6
显示的12-8
</code></pre><p>第二次生成完毕后的结果如下图：</p>
<p><img src="/blog/images/roll-change/18.jpg" alt="18"></p>
<p>那么剩余的我是以这样的方法实现的——</p>
<p><img src="/blog/images/roll-change/19.jpg" alt="19"></p>
<p>第三次：</p>
<p>Lv2</p>
<pre><code>遮盖生成的是12-8
显示生成的是2-2
</code></pre><p>第四次：</p>
<p>Lv3</p>
<pre><code>遮盖生成的是12-6
遮盖生成的是12-8
遮盖生成的是12-9
显示生成的是7-5
</code></pre><p>至此第一行的变换全部实现。现有的弹幕列表如下——</p>
<p>Lv0</p>
<pre><code>遮盖的17-6
显示的12-5
</code></pre><p>Lv1</p>
<pre><code>遮盖的7-6
显示的12-8
</code></pre><p>Lv2</p>
<pre><code>遮盖的12-8
显示的2-2
</code></pre><p>Lv3</p>
<pre><code>遮盖的12-6
遮盖的12-8
遮盖的12-9
显示的7-5
</code></pre><p>然后我们从上到下分析一下：</p>
<p>由于Lv0中已经存在了12-8，所以之下的所有Lv中12-8都可以删除<br>由于Lv3中三条都是长度为12的弹幕，可以将它们合并。<br>！！注意：同Lv的相同长度的弹幕才能合并！！</p>
<p>所以分析完成之后的弹幕列表如下——</p>
<p>Lv0</p>
<pre><code>遮盖的17-6
显示的12-5
</code></pre><p>Lv1</p>
<pre><code>遮盖的7-6
显示的12-8
</code></pre><p>Lv2</p>
<p>Lv3</p>
<pre><code>遮盖的12-6、9
显示的7-5
</code></pre><p>好，那么为了实现第一行的变换，我们需要如下的弹幕：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">“　　　　　█　　　　　　　　　　　” 白色</span><br><span class="line">“　　　　█　　　　　　　”              蓝色</span><br><span class="line">“　　　　　█　”                       白色</span><br><span class="line">“　　　　　　　　█　　　”              蓝色</span><br><span class="line">“　█”                                    蓝色</span><br><span class="line">“　　　　　█　　█　　　”              白色</span><br><span class="line">“　　　　█　　”                       蓝色</span><br></pre></td></tr></table></figure>
<p>然后说最后的注意事项——</p>
<p>因为，滚动变换中的弹幕都有着相同的出现时间，而XML读取器则是遵循“先读取先显示”的。所以最后创建的弹幕，才能遮盖掉先创建的弹幕。</p>
<p>也就是说，请自下而上地创建弹幕。即创建弹幕的顺序为生成顺序的逆转——</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">显示的<span class="number">7</span>-<span class="number">5</span>      “　　　　█　　”                       蓝色</span><br><span class="line">遮盖的<span class="number">12</span>-<span class="number">6</span>、<span class="number">9</span>   “　　　　　█　　█　　　”              白色</span><br><span class="line">显示的<span class="number">2</span>-<span class="number">2</span>      “　█”                                    蓝色</span><br><span class="line">显示的<span class="number">12</span>-<span class="number">8</span>     “　　　　　　　　█　　　”              蓝色</span><br><span class="line">遮盖的<span class="number">7</span>-<span class="number">6</span>      “　　　　　█　”                       白色</span><br><span class="line">显示的<span class="number">12</span>-<span class="number">5</span>     “　　　　█　　　　　　　”              蓝色</span><br><span class="line">遮盖的<span class="number">17</span>-<span class="number">6</span>     “　　　　　█　　　　　　　　　　　” 白色</span><br></pre></td></tr></table></figure>
<p>哎呀好像超过预计页数了的样子……</p>
<p>第一行的结果已经出来了。你们可以拿设计器v2去模拟，也可以自己写XML来模拟。不过现在只做了一行的滚动变换，虽然结果是正确的但是看上去很不爽对吧……于是你们可以按照以上的步骤，把第二节第二幅图中的全部五行都做出来……然后把弹幕合在一起。</p>
<p>！！这里还有个要点，行跟行之间的弹幕是没有任何关系的，你可以选择就这么直接叠加，也可以选择按照Lv的顺序将它们合并优化，这会很大程度上减少弹幕的数量，不过这不是必需的。暂时你们只要牢记每行的Lv不能改变就是了，如果愿意研究的可以自己试着去优化一下。！！</p>
<p>然后，你们就能看到一个自己做出来的MIKU滚动变换啦w</p>
<h2 id="五、结语">五、结语</h2><ul>
<li><p>总结一下要点吧。</p>
</li>
<li><p>首先数学很重要啊。</p>
</li>
<li><p>其次物理也很重要啊。</p>
</li>
<li><p>最后做弹幕的伤不起啊。</p>
</li>
</ul>
<p>好吧扯远了……</p>
<p>如果要做新的变换，比如汉字什么的。</p>
<pre><code>第零：请把理论完全掌握了……
第一：画出第二节的第一幅图样。
第二：画出第二节的第二幅图样。
第三：逐行生成弹幕。
第四：将每行生成出来的弹幕进行优化。
第五：合并所有行的弹幕并优化。
第结束：生成弹幕内容。
</code></pre><p>还有，刚才我所说的汉字的限制，请自行体会w</p>
<p>By Azure22 静之籁 2011/05/29</p>
<p>谨以本文纪念我去年的三个通宵。</p>

        
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/blog/2015/06/23/ubuntu-find/">
                Ubuntu下遇到的find指令不存在的问题
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-06-23
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/blog/categories/技术问题/">技术问题</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/blog/2015/06/23/ubuntu-find/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/06/23/ubuntu-find/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          oldfind和find的区别
          <div class="post-more-link text-center">
            <a class="btn" href="/blog/2015/06/23/ubuntu-find/">
              阅读全文 &raquo;
            </a>
          </div>
          
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/blog/2015/06/18/jekyll-to-hexo/">
                将博客从jekyll迁移到Hexo
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-06-18
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/blog/categories/技术笔记/">技术笔记</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/blog/2015/06/18/jekyll-to-hexo/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/06/18/jekyll-to-hexo/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          博客系统，一切以实用为主。以呈现内容为主要目的
          <div class="post-more-link text-center">
            <a class="btn" href="/blog/2015/06/18/jekyll-to-hexo/">
              阅读全文 &raquo;
            </a>
          </div>
          
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/blog/2015/05/23/generic-algorithm/">
                C++标准库算法遇到的一些问题
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-05-23
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/blog/categories/技术问题/">技术问题</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/blog/2015/05/23/generic-algorithm/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/05/23/generic-algorithm/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          需要深入理解“泛型”的思想，体会标准库是如何通过算法和数据结构的分离来实现泛型，迭代器是如何在这两者之间架起的桥梁。
          <div class="post-more-link text-center">
            <a class="btn" href="/blog/2015/05/23/generic-algorithm/">
              阅读全文 &raquo;
            </a>
          </div>
          
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/blog/2015/04/23/iot-origin/">
                物联网关于硬件平台/协议的原型设计
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-04-23
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/blog/categories/物联网/">物联网</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/blog/2015/04/23/iot-origin/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/04/23/iot-origin/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          起初的原型设计，包括硬件平台/协议选型，都关系到后期整个项目的进展。
          <div class="post-more-link text-center">
            <a class="btn" href="/blog/2015/04/23/iot-origin/">
              阅读全文 &raquo;
            </a>
          </div>
          
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/blog/2015/04/03/cpp-learning/">
                Does C support function overloading like C++?
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-04-03
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/blog/categories/技术问题/">技术问题</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/blog/2015/04/03/cpp-learning/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/04/03/cpp-learning/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          A Variable Argument List is not Function Overloading
          <div class="post-more-link text-center">
            <a class="btn" href="/blog/2015/04/03/cpp-learning/">
              阅读全文 &raquo;
            </a>
          </div>
          
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/blog/2015/01/03/bintree-postoder/">
                二叉树的后序非递归遍历
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2015-01-03
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/blog/categories/技术笔记/">技术笔记</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/blog/2015/01/03/bintree-postoder/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2015/01/03/bintree-postoder/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          二叉树作为一种十分重要的数据结构，基本的遍历方式有三种，先序，中序，后序。一般可以用递归的形式来遍历。而非递归则需要采用堆栈俩模拟，其中先序和中序较好实现，但后序相对会难点。
          <div class="post-more-link text-center">
            <a class="btn" href="/blog/2015/01/03/bintree-postoder/">
              阅读全文 &raquo;
            </a>
          </div>
          
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/blog/2014/12/20/diary10/">
                2014-12-11_20日志
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2014-12-20
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/blog/categories/心情笔记/">心情笔记</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/blog/2014/12/20/diary10/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2014/12/20/diary10/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          执行力差。害怕失败，追求完美。关键的问题，还是贵在坚持。
          <div class="post-more-link text-center">
            <a class="btn" href="/blog/2014/12/20/diary10/">
              阅读全文 &raquo;
            </a>
          </div>
          
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              <a class="post-title-link" href="/blog/2014/12/10/diary8/">
                2014-12-10-日志
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2014-12-10
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="/blog/categories/心情笔记/">心情笔记</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/blog/2014/12/10/diary8/#comments" >
              <span class="post-comments-count ds-thread-count" data-thread-key="2014/12/10/diary8/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        
          要开始考试了，时间上开始紧凑！时间管理！信号检测的报告还没有写。多件事情，让我显得有些焦虑。
          <div class="post-more-link text-center">
            <a class="btn" href="/blog/2014/12/10/diary8/">
              阅读全文 &raquo;
            </a>
          </div>
          
      
    </div>

    <div class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </div>
  </div>


    
  </div>

  
  <div class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/blog/page/2/">2</a><a class="page-number" href="/blog/page/3/">3</a><a class="extend next" rel="next" href="/blog/page/2/">&raquo;</a>
  </div>


        </div>

        
      </div>


      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <div class="site-overview">
        <div class="site-author motion-element">
          <img class="site-author-image" src="/blog/images/avatar.jpg" alt="面汤" />
          <p class="site-author-name">面汤</p>
        </div>
        <p class="site-description motion-element">面汤的个人博客</p>
        <div class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/blog/archives">
              <span class="site-state-item-count">28</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/blog/categories">
              <span class="site-state-item-count">9</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/blog/tags">
              <span class="site-state-item-count">13</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </div>

        
          <div class="feed-link motion-element">
            <a href="/blog/atom.xml">
              <i class="menu-item-icon icon-feed"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
              <a href="https://github.com/Miantang" target="_blank">GitHub</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://weibo.com/mt233" target="_blank">Weibo</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://www.douban.com/people/mt233/" target="_blank">DouBan</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://www.zhihu.com/people/mt233" target="_blank">ZhiHu</a>
            </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element">
            <a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank">
              <img src="/blog/images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

      </div>

      

    </div>
  </div>


    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; &nbsp;  2011 - 
  2015
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author">面汤</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/blog/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
  <script type="text/javascript" src="/blog/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/blog/js/fancy-box.js?v=0.4.3"></script>


  <script type="text/javascript" src="/blog/js/helpers.js?v=0.4.3"></script>
  

  <script type="text/javascript" src="/blog/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/blog/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/blog/js/motion_global.js?v=0.4.3" id="motion.global"></script>



  <script type="text/javascript" src="/blog/js/search-toggle.js"></script>

  

  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
    });
  </script>

  

  
  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"miantang"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  


  
  

</body>
</html>
